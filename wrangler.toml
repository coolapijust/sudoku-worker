name = "sudoku-worker"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

[vars]
# 上游服务器配置 (如果使用 SOCKS5 代理模式，此项可留空或保留默认)
UPSTREAM_HOST = ""
UPSTREAM_PORT = "443"

# 加密与布局配置
CIPHER_METHOD = "chacha20-poly1305"
LAYOUT_MODE = "ascii"

# 盐值配置
KEY_DERIVE_SALT = "sudoku-v2-edge-salt"
STANDALONE_PROXY = "true"

# Wasm 导入规则 (ES 模块 Worker 不需要 [wasm_modules]，直接 import 即可)
[[rules]]
type = "CompiledWasm"
globs = ["**/*.wasm"]

[observability]
enabled = false

[observability.logs]
enabled = true
head_sampling_rate = 1
persist = true
invocation_logs = true

[observability.traces]
enabled = true
persist = true
head_sampling_rate = 1
